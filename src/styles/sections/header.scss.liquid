// HEADER.SCSS
// -- sections/header.liquid
// -- snippets/header-announcement-bar.liquid

}



/*  HEADER : Core Styles
 * ---------------------------------------------- */
$navBoxShadow: 0px 1px 9px #8d8d8d;
$navShadowAni: box-shadow 0.25s ease-in-out;
$navMobileGutter: 15px;
$navMinorBorder: 1px solid {{ settings.nav_minor_border_color }};

#header-section {
    position: relative;
    margin-top: 0 !important; //The sticky nav plugin adds margin to the parent but isn't necessary, this prevents it. 
}



/* SNIPPET : Header-Announcement-Bar 
 *           (Promos bar on top of nav bar)
 * ---------------------------------------------- */
 @import url('../snippets/header-announcement-bar.scss.liquid');




/*  NAV : Styles for the Nav-Bar portion
 * ---------------------------------------------- */
#nav-bar-wrapper {
    position: relative;
    z-index: 1000;
    height: 50px;
    width: 100%;
    padding: 0;
    z-index: 50;
    transition: $navShadowAni;

    // SHADOW : When stick nav is active
    &.isStuck {
        box-shadow: $navBoxShadow; 

        #nav-logo-backing {
            box-shadow: $navBoxShadow;
        }
    }

    @include mq( 'lap-and-up' ){
        height: 80px;
    }
    
    /* NAV BG :
     * 
     * Why? Because it lets use use rotated, box-shadows on logo
     * to make a mobile sticky nav with a nice minor box shadow
     * ---------------------------------------------- */
    #nav-bar-bg {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: {{ settings.header_background }};
    }

    #nav-bar {
        position: relative;
        width: 100%;
        height: 100%;
        max-width: 1400px;
    }


    /*  NAV : LOGO :
     * ---------------------------------------------- */
    #nav-logo,
    #nav-logo-backing {
        position: absolute;
        @include flexbox;
        @include justify-content( center );
        @include align-items( center );
        width: 70px;
        height: 70px;
        left: 50%;
        transform: translateX( -50% ) rotateZ( 45deg );
        background: {{ settings.header_background }};
        top: 15px;

        a { transform: rotateZ( -45deg ); }

        a, svg {
            width: 120%;
            height: 120%;
            position: relative;
            left: -5px;
            top: -3px;
        }

        // DESKTOP ( 1024+ )
        @include mq( 'lap-and-up' ) {
            top: 19px;
            left: 200px;
            width: 119px;
            height: 119px;

            a, svg {
                width: 115%;
                height: 115%;
                left: -7px;
                top: -3px;
            }
        }
    }

    // SHADOW : This gives the sticky nav a box shadow on the logo point
    #nav-logo-backing {
        transition: $navShadowAni;
        transform: translateX( -50% ) rotateZ( 45deg );
        background: {{ settings.header_background }};
        z-index: -1; //Relative to #nav-bar-wrapper, so its -1 on the 1000 layer.
    }




    /*  NAV : ACCOUNT + CART + SEARCH + SITE PICKER (Right Elements)
     * ---------------------------------------------- */
    #nav-user {

        // Account / Cart / Site Picker List
        ul#nav-user-list {
            @include inline-flex;
            @include justify-content( flex-end );
            position: absolute;
            right: $navMobileGutter;
            height: 100%;
            list-style: none;
            text-align: right;

            .nav-item {
                @include inline-flex;
                @include align-items( center );
                @include justify-content( center );

                a,
                .inner-center {
                    @include inline-flex;
                    @include align-items( center );
                    @include justify-content( center );
                    width: 100%;
                    height: 100%;
                    padding: 0 7px;
                    text-decoration: none;
                }

                // Account, Cart, etc icons all congruent size
                svg {
                    width: 19px;
                    height: 17px;
                }

                i {
                    @include inline-flex;
                    @include align-items( center );
                    font-size: 20px;
                    height: 100%;
                }
            }

            // HIDE : MOBILE : Don't show sites, currency or search nav-items on mobile
            .nav-sites,
            .nav-search,
            .nav-currency {
                display: none;
                @include justify-content( center );

                @include mq( 'lap-and-up' ) {
                    @include inline-flex;
                }
            }




            // SEARCH : Search input field on 1024 + screen sizes (for now)
            .nav-search {
                position: relative;
                margin-right: 20px;
                width: 200px;

                .nav-search-input {
                    position: relative;
                    width: 200px;
                    max-width: 100%;
                    border: none;
                    border-bottom: $navMinorBorder;
                    padding-right: 23px;
                    outline: none;
                }

                .nav-search-icon-wrap {
                    position: absolute;
                    margin-top: -9px;
                    top: 50%;
                    right: 0;

                    // Hidden search button on top of the search Icon,
                    // so clicking it submits as well as enter.
                    .nav-search-submit {
                        position: absolute;
                        opacity: 0;
                        width: 100%;
                        height: 100%;
                        margin: 0;
                        padding: 0;
                        border-radius: 0;
                    }
                }
            }




            // SITE PICKER : Dropdown selector for the other site pickers
            .nav-sites {
                @include align-items( flex-start );
                position: relative;
                margin-top: -15px;
                top: 50%;

                ul.sites-picker {
                    width: 65px;
                    height: 35px;
                    list-style: none;
                    overflow: hidden;
                    background: {{ settings.header_background }};
                    transition: height 0.25s ease-in-out;

                    &:hover {
                        height: auto;

                        li:first-child {
                            border-bottom: $navMinorBorder;
                        }
                    }

                    li {
                        width: 100%;
                        height: 35px;
                        cursor: pointer;
                        background: {{ settings.header_background }};
                        transition: background 0.25s ease-in-out;

                        // BORDER : Border on all but first (till hovered) and last 
                        &:not(:last-child) { border-bottom: $navMinorBorder; }
                        &:first-child {
                            border: none;

                            // Hide top item country code, its obvious and makes nice spot for arrow indicator
                            .site-name { opacity: 0; }
                        }

                        // HOVER : On a country option
                        &:hover {
                            background: {{ settings.nav_links_hover }};

                            .site-name  { 
                                color: {{ settings.header_background }}; //Use bg color when swapping 
                                background: {{ settings.nav_links_hover }};
                            }
                            .site-arrow { opacity: 0; }

                            &:first-child {
                                .site-name { opacity: 1; }
                            }
                        }

                        .site-flag {
                            height: 17px;
                            margin-right: 4px;
                        }

                        .site-name {
                            background: {{ settings.header_background }};
                            transition: all 0.25s ease-in-out;
                            padding: 0 2px;
                            z-index: 10; // appear on top of arrow
                        }

                        .site-arrow {
                            position: absolute;
                            width: 9px;
                            height: 7px;
                            right: 10px;
                            top: 13px;
                            z-index: 5;
                            transition: opacity 0.25s ease-in-out;

                            svg {    
                                position: absolute;
                                height: 100%;
                                width: 100%;
                                left: 0;
                                top: 0;
                            }
                        }
                    }
                }
            }


            // ACCOUNT : User account item
            .nav-account {
                width: 46px;
                
                &:hover {
                    .icon-account {
                        fill: {{ settings.nav_links_hover }};
                    }
                }

                .icon-account {
                    transition: fill 0.35s ease-in-out;
                    fill: {{ settings.nav_links }};
                }
            }


            // CART 
            .nav-cart {
                color: {{ settings.nav_links }}; //Legacy font-icon support for "bag" font icon

                &:hover {
                    .fa-shopping-bag { color: {{ settings.nav_links_hover }}; }
                    .icon-cart  { fill:  {{ settings.nav_links_hover }}; }
                    .cart-count { color: {{ settings.nav_links_hover }}; }
                }

                i.fa, // Support bag font-icon for now..
                .icon-cart {
                    margin-right: 8px; // Space icon from cart #
                    fill: {{ settings.nav_links }};
                    color: {{ settings.nav_links }}; //For "Bag" insteaed of Cart icon (font icon)
                    transition: fill 0.35s ease-in-out;
                }

                .cart-count {
                    font-weight: bold;
                    color: {{ settings.nav_links }};
                    transition: color 0.35s ease-in-out;
                }
            }
        }
    }



    /*  NAV : SITE-COLLECTIONS (Left Elements)
     * ---------------------------------------------- */
    #nav-collections {
        .icon-nav-mobile-menu {
            position: absolute;
            left: $navMobileGutter;
            width: 30px;
            height: 16px;
            top: 50%;
            transform: translateY(-50%);

            .bar {
                position: absolute;
                background: $color--dark-green-1;
                width: 100%;
                height: 2px;

                &.one   { top: 0; }
                &.two   { 
                    top: 50%;  
                    transform: translateY( -50% ) 
                }
                &.three { 
                    width: 70%;
                    top: 100%; 
                    transform: translateY( -50% ) 
                }
            }
        }
    }
}


